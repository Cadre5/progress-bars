/*! pg.progress-bars v0.0.1 | Pavel Grynchenko <psdcoder@gmail.com> | (c) 2014 */
angular.module("pg.progress-bars",[]),function(){"use strict";function t(t,e,r){if(!t)throw new Error("You must specify name for ProgressBar");if(!e||!e.container||!e.bar)throw new Error('You must specify elements object with "container" and "bar" dom nodes');r=r||{},this.name=t,this.elements=e,this.options={minimum:r.minimum||8,speed:r.speed||250,animation:r.animation||"ease",trickleRate:r.trickleRate||2,trickleSpeed:r.trickleSpeed||500,showingClass:r.showingClass},this.current=null}window.ProgressBar=t,t.prototype._show=function(){this.elements.container.addClass(this.options.showingClass),this.elements.bar.css("opacity",1)},t.prototype._hide=function(){this.elements.container.removeClass(this.options.showingClass),this.elements.bar.css({opacity:0,width:0})},t.prototype._clamp=function(t,e,r){return e>t&&(t=e),t>r&&(t=r),t},t.prototype._trickle=function(){var t=Math.sqrt(100-this.current)/5*this.options.trickleRate;return this.inc(Math.random()*t)},t.prototype._positioning=function(t,e,r){return{width:t+"%",transition:"all "+e+"ms "+r}},t.prototype.set=function(t){var e=this;return this._show(),t=this._clamp(t,this.options.minimum,100),this.current=100===t?null:t,setTimeout(function(){e.elements.bar.css(e._positioning(t,e.options.speed,e.options.animation))},0),100===t&&setTimeout(function(){e.elements.bar.css({transition:"all "+e.options.speed+"ms linear",opacity:0}),setTimeout(function(){e._hide()},e.options.speed)},e.options.speed),this},t.prototype.get=function(){return this.current},t.prototype.start=function(){var t=this;this.toStop=!1,t.current||t.set(0);var e=function(){setTimeout(function(){t.current&&!t.toStop&&(t._trickle(),e())},t.options.trickleSpeed)};return e(),this},t.prototype.stop=function(){this.toStop=!0},t.prototype.inc=function(t){return this.current?("number"!=typeof t&&(t=(100-this.current)*this._clamp(Math.random()*this.current,10,95)),this.current=this._clamp(this.current+t,0,99.4),this.set(this.current)):this.start()},t.prototype.done=function(){return this.current&&this.inc(30+50*Math.random()).set(100),this}}(),function(){"use strict";function t(t,e){var r=t.getClasses(),n={container:r.container||"progress__container",bar:r.bar||"progress__bar",barShowing:r.barShowing||"progress__container_showing"};return{restrict:"EA",replace:!0,template:'<div class="'+n.container+'"><div class="'+n.bar+'"></div></div>',scope:{name:"@",minimum:"@",speed:"@",trickleRate:"@",trickleSpeed:"@",animation:"@"},link:function(t,r){if(!t.name)throw new Error('You must specify "name" property for progress bar');r.attr("id","progress-bar-"+t.name);var i=new window.ProgressBar(t.name,{container:r,bar:r.find("."+n.bar)},{minimum:+t.minimum,speed:+t.speed,ease:t.animation,trickleRate:+t.trickleRate,trickleSpeed:+t.trickleSpeed,showingClass:n.barShowing});e.register(i)}}}angular.module("pg.progress-bars").directive("progressBar",t)}(),function(){"use strict";function t(){var t={};return{setContainerClass:function(e){return t.container=e,this},setBarClass:function(e){return t.bar=e,this},setShowingClass:function(e){return t.barShowing=e,this},$get:function(){this.getClasses=function(){return t}}}}angular.module("pg.progress-bars").provider("ProgressBars",t)}(),function(){"use strict";function t(){var t={};this.register=function(e){t[e.name]=e},this.get=function(e){return t[e]?t[e]:null}}angular.module("pg.progress-bars").service("ProgressBarsStorage",t)}();